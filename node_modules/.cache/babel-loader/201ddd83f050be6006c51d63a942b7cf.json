{"ast":null,"code":"import _regeneratorRuntime from\"D:/codes/DailyNews/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/codes/DailyNews/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/codes/DailyNews/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/codes/DailyNews/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/codes/DailyNews/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/codes/DailyNews/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import Newsitems from\"./Newsitems\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(){var _this;_classCallCheck(this,News);_this=_super.call(this);_this.updateIt=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true,page:1});url=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apikey=dbe57b028aeb41e285a226a94865f7a7&page=\").concat(_this.state.page,\"&pageSize=9\");_context.next=4;return fetch(url);case 4:data=_context.sent;_context.next=7;return data.json();case 7:parsedData=_context.sent;_this.setState({articles:parsedData.articles,totalResults:parsedData.totalResults,loading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.clickNext=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// this.setState({ loading: true });\n// let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${\n//   this.state.page + 1\n// }&pageSize=9`;\n// let data = await fetch(url);\n// let parsedData = await data.json();\n_this.setState({page:_this.state.page+1// articles: parsedData.articles,\n// loading: false,\n});_this.updateIt();case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.clickPrev=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// this.setState({ loading: true });\n// let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${\n//   this.state.page - 1\n// }&pageSize=9`;\n// let data = await fetch(url);\n// let parsedData = await data.json();\n_this.setState({page:_this.state.page-1// articles: parsedData.articles,\n// loading: false,\n});_this.updateIt();case 2:case\"end\":return _context3.stop();}}},_callee3);}));_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.setState({page:_this.state.page+1});// this.setState({ loading: true });\nurl=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apikey=dbe57b028aeb41e285a226a94865f7a7&page=\").concat(_this.state.page,\"&pageSize=9\");_context4.next=4;return fetch(url);case 4:data=_context4.sent;_context4.next=7;return data.json();case 7:parsedData=_context4.sent;// console.table(this.articles)\n_this.setState({articles:_this.state.articles.concat(parsedData.articles),totalResults:parsedData.totalResults// loading: false,\n});case 9:case\"end\":return _context4.stop();}}},_callee4);}));_this.state={articles:[],page:1,loading:false};return _this;}_createClass(News,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var url,data,parsedData;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.setState({loading:true});url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apikey=dbe57b028aeb41e285a226a94865f7a7&page=\").concat(this.state.page,\"&pageSize=9\");_context5.next=4;return fetch(url);case 4:data=_context5.sent;_context5.next=7;return data.json();case 7:parsedData=_context5.sent;this.setState({articles:parsedData.articles,totalResults:parsedData.totalResults,loading:false});case 9:case\"end\":return _context5.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.state.totalResults,loader:this.state.articles.length===this.state.totalResults?/*#__PURE__*/_jsx(Spinner,{}):\"\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Newsitems,{title:element.title?element.title.slice(0,45):\"title null\",description:element.description?element.description.slice(0,88):\"description null\",imgeurl:element.urlToImage?element.urlToImage:\"https://image.cnbcfm.com/api/v1/image/107138943-1666373971994-gettyimages-1417565288-coachtrip0011131.jpeg?v=1666379188&w=1920&h=1080\",newsurl:element.url,author:element.author,date:element.publishedAt,source_id:element.source.id?element.source.id:\"Unknown\",source_name:element.source.name})},element.url);})})})})});}}]);return News;}(Component);News.defaultProps={category:\"general\",country:\"us\"};export default News;","map":{"version":3,"names":["React","Component","Newsitems","Spinner","InfiniteScroll","News","updateIt","setState","loading","page","url","props","country","category","state","fetch","data","json","parsedData","articles","totalResults","clickNext","clickPrev","fetchMoreData","concat","length","map","element","title","slice","description","urlToImage","author","publishedAt","source","id","name","defaultProps"],"sources":["D:/codes/DailyNews/src/components/News.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport Newsitems from \"./Newsitems\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    category: \"general\",\r\n    country: \"us\",\r\n  };\r\n  static propTypes = {\r\n    country: PropTypes.string,\r\n    category: PropTypes.string,\r\n  };\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      articles: [],\r\n      page: 1,\r\n      loading: false,\r\n    };\r\n  }\r\n  updateIt = async () => {\r\n    this.setState({ loading: true, page:1 });\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${this.state.page}&pageSize=9`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n\r\n    this.setState({\r\n      articles: parsedData.articles,\r\n      totalResults: parsedData.totalResults,\r\n      loading: false,\r\n    });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    this.setState({ loading: true });\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${this.state.page}&pageSize=9`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n\r\n    this.setState({\r\n      articles: parsedData.articles,\r\n      totalResults: parsedData.totalResults,\r\n      loading: false,\r\n    });\r\n  }\r\n\r\n  clickNext = async () => {\r\n    // this.setState({ loading: true });\r\n    // let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${\r\n    //   this.state.page + 1\r\n    // }&pageSize=9`;\r\n    // let data = await fetch(url);\r\n    // let parsedData = await data.json();\r\n\r\n    this.setState({\r\n      page: this.state.page + 1,\r\n      // articles: parsedData.articles,\r\n      // loading: false,\r\n    });\r\n    this.updateIt();\r\n  };\r\n\r\n  clickPrev = async () => {\r\n    // this.setState({ loading: true });\r\n    // let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${\r\n    //   this.state.page - 1\r\n    // }&pageSize=9`;\r\n    // let data = await fetch(url);\r\n    // let parsedData = await data.json();\r\n\r\n    this.setState({\r\n      page: this.state.page - 1,\r\n      // articles: parsedData.articles,\r\n      // loading: false,\r\n    });\r\n    this.updateIt();\r\n  };\r\n  fetchMoreData = async () => {\r\n    this.setState({ page: this.state.page +1});\r\n\r\n    // this.setState({ loading: true });\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apikey=dbe57b028aeb41e285a226a94865f7a7&page=${this.state.page}&pageSize=9`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    // console.table(this.articles)\r\n    this.setState({\r\n      articles: this.state.articles.concat(parsedData.articles),\r\n      totalResults: parsedData.totalResults,\r\n      // loading: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <InfiniteScroll\r\n          dataLength={this.state.articles.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.articles.length !== this.state.totalResults}\r\n          loader={(this.state.articles.length === this.state.totalResults)?<Spinner />:\"\"}\r\n        >\r\n          <div className=\"container\">\r\n          <div className=\"row\">\r\n            {this.state.articles.map((element) => {\r\n              return (\r\n                <div className=\"col-md-4\" key={element.url}>\r\n                  <Newsitems\r\n                    title={\r\n                      element.title ? element.title.slice(0, 45) : \"title null\"\r\n                    }\r\n                    description={\r\n                      element.description\r\n                        ? element.description.slice(0, 88)\r\n                        : \"description null\"\r\n                    }\r\n                    imgeurl={\r\n                      element.urlToImage\r\n                        ? element.urlToImage\r\n                        : \"https://image.cnbcfm.com/api/v1/image/107138943-1666373971994-gettyimages-1417565288-coachtrip0011131.jpeg?v=1666379188&w=1920&h=1080\"\r\n                    }\r\n                    newsurl={element.url}\r\n                    author={element.author}\r\n                    date={element.publishedAt}\r\n                    source_id={\r\n                      element.source.id ? element.source.id : \"Unknown\"\r\n                    }\r\n                    source_name={element.source.name}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          </div>\r\n        </InfiniteScroll>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default News;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}